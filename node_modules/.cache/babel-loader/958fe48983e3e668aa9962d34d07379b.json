{"ast":null,"code":"import _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { locations, addLocation as _addLocation, deleteLocation as _deleteLocation, updateLocation as _updateLocation } from \"../../../src/reduxHelper\";\nimport Locations from \"../../../src/components/templates/locations\";\nimport { locationColumns, locationColumnData } from \"./locations.data\";\nimport uuidv4 from \"uuid/v4\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      locationTableData: []\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadLocationData();\n    }\n  }, {\n    key: \"handleCreateLocation\",\n    value: function handleCreateLocation(data, cb) {\n      var _this2 = this;\n\n      data.values.blocationID = uuidv4();\n      var businessID = this.props.business.response.data.businessID;\n      this.props.addLocation(businessID, data.values).then(function (res) {\n        _this2.loadLocationData();\n\n        cb({\n          status: true,\n          message: \"Location created successful\"\n        });\n      }).catch(function (err) {\n        console.log(err);\n        cb({\n          status: false,\n          message: \"SomeError occured\"\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.props.locations.isLoaded) {\n        // console.log(this.state.locationTableData)\n        return React.createElement(\"div\", null, React.createElement(Locations, {\n          rowSelection: {},\n          columns: locationColumns,\n          columnData: this.state.locationTableData,\n          onCreate: function onCreate(data, cb) {\n            return _this3.handleCreateLocation(data, cb);\n          }\n        }));\n      } else {\n        return React.createElement(\"h1\", null, \"Loading\");\n      }\n    }\n  }, {\n    key: \"_createLocationColumns\",\n    value: function _createLocationColumns(data) {\n      var _this4 = this;\n\n      var temp = [];\n\n      if (_Array$isArray(data)) {\n        data.map(function (item) {\n          var object = {};\n          object.pocname = item.pocName;\n          object.name = item.name;\n          object.blocationID = item.blocationID;\n          object.address = item.address;\n          object.email = item.pocEmail;\n          object.handleFeatures = {\n            handleDelete: function handleDelete(id) {\n              console.log(id);\n\n              _this4.props.deleteLocation(id).then(function (res) {\n                _this4.loadLocationData();\n              }).catch(function (err) {\n                console.log(err);\n              });\n            },\n            handleUpdate: function handleUpdate(data, id, cb) {\n              // console.log(\"clicked\", data, id, cb)\n              _this4.props.updateLocation(id, data.values).then(function (res) {\n                _this4.loadLocationData();\n\n                cb({\n                  status: true,\n                  message: \"Location updated\"\n                });\n              }).catch(function (err) {\n                console.log(err);\n                cb({\n                  status: false,\n                  message: \"Some Error while updating\"\n                });\n              });\n            }\n          };\n          temp.push(object);\n        });\n      } else {\n        var object = {};\n        object.pocname = item.pocName, object.name = item.name;\n        object.blocationID = item.blocationID;\n        object.address = data.address;\n        object.email = data.pocEmail;\n        temp.push(object);\n      }\n\n      return temp;\n    }\n  }, {\n    key: \"loadLocationData\",\n    value: function loadLocationData() {\n      var _this5 = this;\n\n      var businessID = this.props.business.response.data.businessID;\n      this.props.getLocations(businessID).then(function (res) {\n        _this5.setState({\n          locationTableData: _this5._createLocationColumns(res)\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    business: state.businesses,\n    locations: state.locations,\n    addLocation: state.addLocation,\n    deleteLocation: state.deleteLocation,\n    updateLocation: state.updateLocation\n  };\n}; // Example Syntax for writing dispatch\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getLocations: function getLocations(businessID) {\n      return dispatch(locations.action(businessID));\n    },\n    addLocation: function addLocation(businessID, object) {\n      return dispatch(_addLocation.action(businessID, object));\n    },\n    deleteLocation: function deleteLocation(blocationID) {\n      return dispatch(_deleteLocation.action(blocationID));\n    },\n    updateLocation: function updateLocation(blocationID, object) {\n      return dispatch(_updateLocation.action(blocationID, object));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/subham/Desktop/work/skip/skip-frontend/pages/dashboard/.locations/index.js"],"names":["React","connect","locations","addLocation","deleteLocation","updateLocation","Locations","locationColumns","locationColumnData","uuidv4","App","props","state","locationTableData","loadLocationData","data","cb","values","blocationID","businessID","business","response","then","res","status","message","catch","err","console","log","isLoaded","handleCreateLocation","temp","map","item","object","pocname","pocName","name","address","email","pocEmail","handleFeatures","handleDelete","id","handleUpdate","push","getLocations","setState","_createLocationColumns","Component","mapStateToProps","businesses","mapDispatchToProps","dispatch","action"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport { connect } from \"react-redux\"\n\nimport { locations, addLocation, deleteLocation, updateLocation } from \"../../../src/reduxHelper\"\nimport Locations from \"../../../src/components/templates/locations\"\n\nimport { locationColumns, locationColumnData } from \"./locations.data\"\n\nimport uuidv4 from \"uuid/v4\"\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      locationTableData: []\n    }\n  }\n\n  componentDidMount() {\n    this.loadLocationData()\n  }\n\n  handleCreateLocation(data, cb) {\n    data.values.blocationID = uuidv4()\n    let businessID = this.props.business.response.data.businessID\n    this.props\n      .addLocation(businessID, data.values)\n      .then(res => {\n        this.loadLocationData()\n        cb({ status: true, message: \"Location created successful\" })\n      })\n      .catch(err => {\n        console.log(err)\n        cb({ status: false, message: \"SomeError occured\" })\n      })\n  }\n\n  render() {\n    if (this.props.locations.isLoaded) {\n      // console.log(this.state.locationTableData)\n      return (\n        <div>\n          <Locations\n            rowSelection={{}}\n            columns={locationColumns}\n            columnData={this.state.locationTableData}\n            onCreate={(data, cb) => this.handleCreateLocation(data, cb)}\n          />\n        </div>\n      )\n    } else {\n      return <h1>Loading</h1>\n    }\n  }\n\n  _createLocationColumns(data) {\n    let temp = []\n    if (Array.isArray(data)) {\n      data.map(item => {\n        let object = {};\n        object.pocname = item.pocName\n        object.name = item.name\n        object.blocationID = item.blocationID\n        object.address = item.address\n        object.email = item.pocEmail\n        object.handleFeatures = {\n          handleDelete: (id) => {\n            console.log(id)\n            this.props.deleteLocation(id).then(res => {\n              this.loadLocationData();\n            }).catch(err => {\n              console.log(err);\n            })\n          },\n          handleUpdate: (data, id, cb) => {\n            // console.log(\"clicked\", data, id, cb)\n            this.props.updateLocation(id, data.values).then(res => {\n              this.loadLocationData()\n              cb({ status: true, message: \"Location updated\" })\n            }).catch(err => {\n              console.log(err)\n              cb({ status: false, message: \"Some Error while updating\" })\n            })\n          }\n        }\n        temp.push(object)\n      })\n    } else {\n      let object = {}\n        ;(object.pocname = item.pocName), (object.name = item.name)\n      object.blocationID = item.blocationID\n      object.address = data.address\n      object.email = data.pocEmail\n      temp.push(object)\n    }\n    return temp\n  }\n\n  loadLocationData() {\n    let businessID = this.props.business.response.data.businessID\n    this.props\n      .getLocations(businessID)\n      .then(res => {\n        this.setState({ locationTableData: this._createLocationColumns(res) })\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n}\n\nconst mapStateToProps = state => ({\n  business: state.businesses,\n  locations: state.locations,\n  addLocation: state.addLocation,\n  deleteLocation: state.deleteLocation,\n  updateLocation: state.updateLocation\n})\n// Example Syntax for writing dispatch\nconst mapDispatchToProps = dispatch => ({\n  getLocations: businessID => dispatch(locations.action(businessID)),\n  addLocation: (businessID, object) => dispatch(addLocation.action(businessID, object)),\n  deleteLocation: (blocationID) => dispatch(deleteLocation.action(blocationID)),\n  updateLocation: (blocationID, object) => dispatch(updateLocation.action(blocationID, object)),  \n  })\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App)\n"]},"metadata":{},"sourceType":"module"}