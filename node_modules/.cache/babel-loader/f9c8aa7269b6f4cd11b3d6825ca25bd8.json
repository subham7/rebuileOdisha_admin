{"ast":null,"code":"import _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { products, addProduct as _addProduct, deleteProduct as _deleteProduct, updateProduct as _updateProduct } from \"../../../../src/reduxHelper\";\nimport Products from '../../../../src/components/organisms/items';\nimport ButtonIcon from '../../../../src/components/atoms/tableButton';\nimport wrapper from \"./wrapper\";\nimport { itemData } from './product.data';\nimport uuidv4 from \"uuid/v4\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      productsTableData: []\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadproductsData();\n    }\n  }, {\n    key: \"handleCreateproducts\",\n    value: function handleCreateproducts(data, cb) {\n      var _this2 = this;\n\n      data.values.productID = uuidv4();\n      data.values.business = this.props.business.response.data.businessID;\n      this.props.addProduct(data.values).then(function (res) {\n        _this2.loadproductsData();\n\n        cb({\n          status: true,\n          message: \"products created successfully\"\n        });\n      }).catch(function (err) {\n        console.log(err);\n        cb({\n          status: false,\n          message: \"SomeError occured\"\n        });\n      });\n    }\n  }, {\n    key: \"callback\",\n    value: function callback(key) {// console.log(key);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.props.products.isLoaded) {\n        return React.createElement(\"div\", null, React.createElement(Products, {\n          formData: this.createSelectData(this.props.productCategories.response.data),\n          rowSelection: {},\n          cardData: itemData.cardData,\n          cascaderData: itemData.cascaderData,\n          columns: itemData.productColumns,\n          columnData: this.state.productsTableData,\n          onCreate: function onCreate(data, cb) {\n            return _this3.handleCreateproducts(data, cb);\n          }\n        }));\n      } else {\n        return React.createElement(\"h1\", null, \"Loading\");\n      }\n    }\n  }, {\n    key: \"_createproductsColumns\",\n    value: function _createproductsColumns(data) {\n      var _this4 = this;\n\n      var temp = [];\n\n      if (_Array$isArray(data)) {\n        data.map(function (item) {\n          var object = {};\n          object.name = item.name;\n          object.productID = item.productID, object.code = item.code;\n          object.barcode = item.barcode;\n          object.category = item.productcategory;\n          object.price = item.price;\n          object.handleFeatures = {\n            handleDelete: function handleDelete(urlParams) {\n              urlParams.businessID = _this4.props.business.response.data.businessID;\n              console.log(\"here\", urlParams);\n\n              _this4.props.deleteProduct(urlParams).then(function (res) {\n                _this4.loadproductsData();\n              }).catch(function (err) {\n                console.log(err);\n              });\n            },\n            editProduct: function editProduct(data, id, cb) {\n              console.log(\"clicked\", data, id, cb);\n\n              _this4.props.updateProduct(id, data.values).then(function (res) {\n                _this4.loadproductsData();\n\n                cb({\n                  status: true,\n                  message: \"Product updated\"\n                });\n              }).catch(function (err) {\n                console.log(err);\n                cb({\n                  status: false,\n                  message: \"Some Error while updating\"\n                });\n              });\n            }\n          };\n          temp.push(object);\n        });\n      } else {\n        var object = {};\n        object.name = data.name;\n        object.productID = item.productID, object.code = data.code;\n        object.barcode = data.barcode;\n        object.category = data.productcategory;\n        object.price = data.price;\n        object.handleFeatures = {\n          handleDelete: function handleDelete(urlParams) {\n            urlParams.businessID = _this4.props.business.response.data.businessID;\n            console.log(\"here\", urlParams);\n\n            _this4.props.deleteProduct(urlParams).then(function (res) {\n              _this4.loadproductsData();\n            }).catch(function (err) {\n              console.log(err);\n            });\n          },\n          editProduct: function editProduct(data, id, cb) {\n            console.log(\"clicked\", data, id, cb);\n\n            _this4.props.updateProduct(id, data.values).then(function (res) {\n              _this4.loadproductsData();\n\n              cb({\n                status: true,\n                message: \"Product updated\"\n              });\n            }).catch(function (err) {\n              console.log(err);\n              cb({\n                status: false,\n                message: \"Some Error while updating\"\n              });\n            });\n          }\n        };\n        temp.push(object);\n      }\n\n      return temp;\n    }\n  }, {\n    key: \"loadproductsData\",\n    value: function loadproductsData() {\n      var _this5 = this;\n\n      console.log(\"loading\");\n      var businessID = this.props.business.response.data.businessID;\n      this.props.getproducts(businessID).then(function (res) {\n        _this5.setState({\n          productsTableData: _this5._createproductsColumns(res)\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"createSelectData\",\n    value: function createSelectData(data) {\n      var selectData = data.map(function (item) {\n        return {\n          name: item.name,\n          value: item.productcategoryID\n        };\n      });\n      return selectData;\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    business: state.businesses,\n    products: state.products,\n    taxcategories: state.taxcategories,\n    addProduct: state.addProduct,\n    deleteProduct: state.deleteProduct,\n    updateProduct: state.updateProduct\n  };\n}; // Example Syntax for writing dispatch\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getproducts: function getproducts(businessID) {\n      return dispatch(products.action(businessID));\n    },\n    addProduct: function addProduct(businessID, object) {\n      return dispatch(_addProduct.action(businessID, object));\n    },\n    getTaxeCategories: function (_getTaxeCategories) {\n      function getTaxeCategories(_x) {\n        return _getTaxeCategories.apply(this, arguments);\n      }\n\n      getTaxeCategories.toString = function () {\n        return _getTaxeCategories.toString();\n      };\n\n      return getTaxeCategories;\n    }(function (businessID) {\n      return dispatch(getTaxeCategories.action(businessID));\n    }),\n    addTaxeCategories: function (_addTaxeCategories) {\n      function addTaxeCategories(_x2, _x3) {\n        return _addTaxeCategories.apply(this, arguments);\n      }\n\n      addTaxeCategories.toString = function () {\n        return _addTaxeCategories.toString();\n      };\n\n      return addTaxeCategories;\n    }(function (businessID, object) {\n      return dispatch(addTaxeCategories.action(businessID, object));\n    }),\n    deleteProduct: function deleteProduct(urlParams) {\n      return dispatch(_deleteProduct.action(urlParams));\n    },\n    updateProduct: function updateProduct(productID, object) {\n      return dispatch(_updateProduct.action(productID, object));\n    }\n  };\n};\n\nexport default wrapper(connect(mapStateToProps, mapDispatchToProps)(App));","map":{"version":3,"sources":["/Users/subham/Desktop/work/skip/skip-frontend/pages/dashboard/.products/.products/index.js"],"names":["React","connect","products","addProduct","deleteProduct","updateProduct","Products","ButtonIcon","wrapper","itemData","uuidv4","App","props","state","productsTableData","loadproductsData","data","cb","values","productID","business","response","businessID","then","res","status","message","catch","err","console","log","key","isLoaded","createSelectData","productCategories","cardData","cascaderData","productColumns","handleCreateproducts","temp","map","item","object","name","code","barcode","category","productcategory","price","handleFeatures","handleDelete","urlParams","editProduct","id","push","getproducts","setState","_createproductsColumns","selectData","value","productcategoryID","Component","mapStateToProps","businesses","taxcategories","mapDispatchToProps","dispatch","action","getTaxeCategories","addTaxeCategories"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport { connect } from \"react-redux\"\r\n\r\nimport { products, addProduct, deleteProduct, updateProduct } from \"../../../../src/reduxHelper\"\r\nimport Products from '../../../../src/components/organisms/items'\r\nimport ButtonIcon from '../../../../src/components/atoms/tableButton';\r\nimport wrapper from \"./wrapper\"\r\nimport { itemData } from './product.data'\r\nimport uuidv4 from \"uuid/v4\"\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      productsTableData: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadproductsData()\r\n  }\r\n\r\n  handleCreateproducts(data, cb) {\r\n    data.values.productID = uuidv4()\r\n    data.values.business = this.props.business.response.data.businessID\r\n    this.props\r\n      .addProduct(data.values)\r\n      .then(res => {\r\n        this.loadproductsData()\r\n        cb({ status: true, message: \"products created successfully\" })\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        cb({ status: false, message: \"SomeError occured\" })\r\n      })\r\n  }\r\n\r\n  callback(key) {\r\n    // console.log(key);\r\n  }\r\n\r\n  render() {\r\n    if (this.props.products.isLoaded) {\r\n      return (\r\n        <div>\r\n          <Products\r\n            formData={this.createSelectData(\r\n              this.props.productCategories.response.data\r\n            )}\r\n            rowSelection={{}}\r\n            cardData={itemData.cardData}\r\n            cascaderData={itemData.cascaderData}\r\n            columns={itemData.productColumns}\r\n            columnData={this.state.productsTableData}\r\n            onCreate={(data, cb) => this.handleCreateproducts(data, cb)}\r\n          />\r\n        </div>\r\n      )\r\n    } else {\r\n      return <h1>Loading</h1>\r\n    }\r\n  }\r\n\r\n  _createproductsColumns(data) {\r\n    let temp = []\r\n    if (Array.isArray(data)) {\r\n      data.map(item => {\r\n        let object = {}\r\n        object.name = item.name\r\n        object.productID = item.productID,\r\n        object.code = item.code\r\n        object.barcode = item.barcode\r\n        object.category = item.productcategory\r\n        object.price = item.price\r\n        object.handleFeatures = {\r\n          handleDelete: urlParams => {\r\n            urlParams.businessID = this.props.business.response.data.businessID;\r\n            console.log(\"here\", urlParams)\r\n            this.props.deleteProduct(urlParams).then(res => {\r\n              this.loadproductsData();\r\n            }).catch(err => {\r\n              console.log(err);\r\n            })\r\n          },\r\n          editProduct: (data, id, cb) => {\r\n            console.log(\"clicked\", data, id, cb)\r\n            this.props.updateProduct(id, data.values).then(res => {\r\n              this.loadproductsData()\r\n              cb({ status: true, message: \"Product updated\" })\r\n            }).catch(err => {\r\n              console.log(err)\r\n              cb({ status: false, message: \"Some Error while updating\" })\r\n            })\r\n          }\r\n        }\r\n        temp.push(object)\r\n      })\r\n    } else {\r\n      let object = {}\r\n      object.name = data.name\r\n      object.productID = item.productID,\r\n      object.code = data.code\r\n      object.barcode = data.barcode\r\n      object.category = data.productcategory\r\n      object.price = data.price\r\n      object.handleFeatures = {\r\n        handleDelete: urlParams => {\r\n          urlParams.businessID = this.props.business.response.data.businessID;\r\n          console.log(\"here\", urlParams)\r\n          this.props.deleteProduct(urlParams).then(res => {\r\n            this.loadproductsData();\r\n          }).catch(err => {\r\n            console.log(err);\r\n          })\r\n        },\r\n        editProduct: (data, id, cb) => {\r\n          console.log(\"clicked\", data, id, cb)\r\n          this.props.updateProduct(id, data.values).then(res => {\r\n            this.loadproductsData()\r\n            cb({ status: true, message: \"Product updated\" })\r\n          }).catch(err => {\r\n            console.log(err)\r\n            cb({ status: false, message: \"Some Error while updating\" })\r\n          })\r\n        }\r\n      }\r\n      temp.push(object)\r\n      }\r\n      return temp\r\n    }\r\n\r\n    loadproductsData() {\r\n      console.log(\"loading\")\r\n      let businessID = this.props.business.response.data.businessID\r\n      this.props.getproducts(businessID).then(res => {\r\n        this.setState({ productsTableData: this._createproductsColumns(res) })\r\n      })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    }\r\n    createSelectData(data) {\r\n      let selectData = data.map(item => ({\r\n        name: item.name,\r\n        value: item.productcategoryID\r\n      }))\r\n      return selectData\r\n    }\r\n  }\r\n\r\n  const mapStateToProps = state => ({\r\n    business: state.businesses,\r\n    products: state.products,\r\n    taxcategories: state.taxcategories,\r\n    addProduct: state.addProduct,\r\n    deleteProduct: state.deleteProduct,\r\n    updateProduct: state.updateProduct\r\n  })\r\n  // Example Syntax for writing dispatch\r\n  const mapDispatchToProps = dispatch => ({\r\n    getproducts: businessID => dispatch(products.action(businessID)),\r\n    addProduct: (businessID, object) =>\r\n      dispatch(addProduct.action(businessID, object)),\r\n    getTaxeCategories: businessID =>\r\n      dispatch(getTaxeCategories.action(businessID)),\r\n    addTaxeCategories: (businessID, object) =>\r\n      dispatch(addTaxeCategories.action(businessID, object)),\r\n    deleteProduct: (urlParams) =>\r\n      dispatch(deleteProduct.action(urlParams)),\r\n    updateProduct: (productID, object) =>\r\n      dispatch(updateProduct.action(productID, object))\r\n  })\r\n  export default wrapper(\r\n    connect(\r\n      mapStateToProps,\r\n      mapDispatchToProps\r\n    )(App)\r\n  )\r\n"]},"metadata":{},"sourceType":"module"}